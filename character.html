<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Character</title>
  </head>
  <body>
    <header>
      <div class="toolbar">
        <div>
          <p>Character</p>
        </div>
        <div class="icons">
          <img src="/pictures/home.svg" alt="home" class="icons1" />
          <img src="/pictures/character.svg" alt="character" class="icons2" />
          <img src="/pictures/settings.svg" alt="settings" class="icons3" />
        </div>
      </div>
      <div>
        <hr />
      </div>
    </header>

    <main>
      <div class="character-card">
        <div>
          <img src="/pictures/avatar1.png" alt="avatar1" id="currentAvatar" />
          <div class="other-avatars">
            <img class="avatar-option" src="/pictures/avatar1.png" alt="avatar1" data-avatar="/pictures/avatar1.png" />
            <img
              class="avatar-option"
              src="/pictures/avatar2.jpg"
              alt="avatar2"
              data-avatar="/pictures/avatar2.jpg"
            />
            <img
              class="avatar-option"
              src="/pictures/avatar3.jpg"
              alt="avatar3"
              data-avatar="/pictures/avatar3.jpg"
            />
            <img
              class="avatar-option"
              src="/pictures/avatar4.jpg"
              alt="avatar4"
              data-avatar="/pictures/avatar4.jpg"
            />
          </div>
        </div>

        <div>
          <p id="playerName"><span class="player-name"></span></p>
          <div class="stats">
            <div class="wins">
              <p>Wins:</p>
              <p class="playerLosses"></p>
            </div>
            <div class="losses">
              <p>Losses:</p>
              <p class="playerLosses"></p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      const characters = JSON.parse(localStorage.getItem("characters")) || [];

      if (characters.length > 0) {
        const lastCharacter = characters[characters.length - 1];
        document.querySelector("#playerName").textContent = lastCharacter;
      }

      document.querySelector(".icons1").onclick = function () {
        location.href = "homepage.html";
      };
      document.querySelector(".icons2").onclick = function () {
        location.href = "character.html";
      };
      document.querySelector(".icons3").onclick = function () {
        location.href = "settings.html";
      };

      // change avatar
      let currentAvatar = document.getElementById("currentAvatar");
      let avatarOptions = document.querySelectorAll(".avatar-option");

      avatarOptions.forEach((option) => {
        option.addEventListener("click", () => {
          let selectedAvatar = option.getAttribute("data-avatar");
          currentAvatar.src = selectedAvatar;

          localStorage.setItem("selectedAvatar", selectedAvatar);

        
      });
        window.addEventListener("DOMContentLoaded", () => {
            let saved = localStorage.getItem("selectedAvatar");
            if (saved) {
              currentAvatar.src = saved;
            }
          });
        });
    </script>
  </body>
</html>
